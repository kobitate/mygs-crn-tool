function getSetting(n,c){chrome.storage.sync.get(n,function(n){c(n)})}function setSetting(n,c){chrome.storage.sync.set(n,c)}function makeCRNButton(n){if(""===n)return!1;var c='<span class="btn crn-item" data-crn="'+n+'"><input type="checkbox" name="select-crn" id="select-crn-'+n+'" />&nbsp;<label for="select-crn-'+n+'"><span class="crn-num">'+n+"</span></label></span>";$("#crn-list").append(c)}function deleteCRNs(n){n instanceof Array||(n=n.split(",")),getSetting("crns",function(c){if(void 0!==c.crns){var t=c.crns.split(","),e=[];n.forEach(function(n){var c=t.indexOf(n+"");c>-1&&(t.splice(c,1),e.push($(".crn-item[data-crn="+n+"]")));var i=t.join();setSetting({crns:i},function(){e.forEach(function(n){n.remove()})})})}})}$(document).ready(function(){getSetting("crns",function(n){if(void 0!==n.crns){var c=n.crns.split(",");c.forEach(function(n){makeCRNButton(n)})}}),$("#add-submit").click(function(){return""===$("#crn-add input").val()?!1:void getSetting("crns",function(n){var c;void 0!==n.crns?(c=n.crns+","+$("#crn-add input").val(),c=c.replace(/(^\s*,)|(,\s*$)/g,"")):c=$("#crn-add input").val(),setSetting({crns:c},function(){makeCRNButton($("#crn-add input").val()),$("#crn-add input").val("")})})}),$("#clear-all").click(function(){$("#dialog-confirm-crn-clear").addClass("show")}),$("#delete-selected").click(function(){var n=[];$("#add-crns input:checked").each(function(){n.push($(this).closest(".crn-item").data("crn")+"")}),deleteCRNs(n)}),$("#dialog-confirm-crn-clear .dialog-yes").click(function(){chrome.storage.sync.clear(function(){$("#crn-list").empty(),$("#dialog-confirm-crn-clear").removeClass("show")})}),$("#dialog-confirm-crn-clear .dialog-no").click(function(){$("#dialog-confirm-crn-clear").removeClass("show")})});